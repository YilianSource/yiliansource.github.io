/** @jsxImportSource @emotion/react */
import { motion } from "framer-motion";
import Link from "next/link";
import { useState, useEffect } from "react";
import { MdMenu, MdClose } from "react-icons/md";

const navigationItems = [
    ["About me", "/#about"],
    ["Projects", "/#projects"],
    ["Artworks", "/#artworks"],
    ["Contact", "/#contact"],
];

const Header = () => {
    const [isSidebarOpen, setSidebarOpen] = useState(false);

    return (
        <header
            css={(theme) => ({
                position: "fixed",
                top: "0px",
                left: "00px",
                height: "200px",
                width: "100%",
                padding: "0 30px",
                background: `linear-gradient(to bottom, ${theme.colors.background.primary}, ${theme.colors.background.primary} 40%, transparent)`,
                zIndex: 100,

                [theme.breakpoints.mobile]: {
                    height: "140px",
                    padding: "0 10px",
                },
            })}
        >
            <div
                css={(theme) => ({
                    position: "relative",
                    height: "78px",

                    display: "flex",
                    flexDirection: "row",
                    alignItems: "center",
                    gap: "48px",

                    [theme.breakpoints.mobile]: {
                        height: "60px",
                    },
                })}
            >
                <div>
                    <Link href="/" passHref>
                        <motion.a initial={{ opacity: 0 }} animate={{ opacity: 1 }}>
                            <svg
                                viewBox="0 0 1024 1024"
                                css={(theme) => ({
                                    height: 78,
                                    width: 78,

                                    [theme.breakpoints.mobile]: {
                                        height: 50,
                                        width: 50,
                                    },
                                })}
                            >
                                <path
                                    fill="currentColor"
                                    d="M325.13,256c-1.3,21.67-2.33,43.3-2.85,64.92-.26,10.8-.46,21.6-.47,32.38s.09,21.53.73,32,1.89,20.66,5.13,29.34l.6,1.64.7,1.59c.43,1.08,1,2.12,1.5,3.17s1.13,2.09,1.68,3.14,1.28,2.24,1.92,3.29a112.29,112.29,0,0,0,8.35,11.95,62.65,62.65,0,0,0,9.7,9.88,33,33,0,0,0,11.42,6.12,27,27,0,0,0,12.5.59,35.48,35.48,0,0,0,12.18-4.89,67.72,67.72,0,0,0,11.16-8.85c1.79-1.69,3.55-3.47,5.29-5.31s3.52-3.72,5.29-5.66l2.7-2.92L414,427l1.22-1.36,1.23-1.34,1.17-1.38,1.19-1.36,1.14-1.39c3.06-3.7,5.91-7.51,8.7-11.49a263.82,263.82,0,0,0,16-26.16c2.52-4.7,5-9.61,7.24-14.46a86.49,86.49,0,0,0,5.38-13.79,38.25,38.25,0,0,0,1-6.16c.18-2.18.29-4.6.35-7.2l.08-3.94c0-.71,0-1.21,0-1.8l0-1.78c-.08-2.42-.19-4.91-.32-7.4L457.53,311c-.25-5-.52-9.86-1-14.7a204.78,204.78,0,0,0-4.77-28,130,130,0,0,0-8.48-24.65l49-16.17c3.32,16.08,6.3,32.23,8.77,48.49s4.51,32.6,6.33,49,3.52,32.86,5.1,49.5l2.27,24.69c.78,8.16,1.53,16.36,2.2,24.59,2.8,32.91,4.53,66.19,4.43,99.58,0,4.18,0,8.36-.1,12.53s-.17,8.36-.29,12.54-.27,8.33-.45,12.47-.37,8.28-.56,12.42c-.84,16.59-2.06,33.28-4,50.15a384.38,384.38,0,0,1-9.08,51.14l-.83,3.2-.84,3.14c-.57,2.12-1.19,4.24-1.82,6.36-1.26,4.23-2.62,8.42-4,12.6l-1.1,3.12-1.1,3.05-2.12,5.8c-1.42,3.89-2.93,7.89-4.51,11.94s-3.31,8.19-5.25,12.41-4,8.48-6.43,12.76a136.47,136.47,0,0,1-8,12.69A128.77,128.77,0,0,1,461,773.59c-.86,1-1.76,1.87-2.67,2.78s-1.81,1.82-2.73,2.71c-1.91,1.7-3.75,3.48-5.74,5.07a124.28,124.28,0,0,1-12.28,9.08,119.17,119.17,0,0,1-13.25,7.52,122.92,122.92,0,0,1-14.25,5.94c-1.24.43-2.52.84-3.83,1.24s-2.8.8-3.67,1c-2.07.54-4.34,1.13-6.67,1.66a128.42,128.42,0,0,1-14.82,2.62,94.75,94.75,0,0,1-16.57.48,80.8,80.8,0,0,1-9-1.07,68,68,0,0,1-9.42-2.42,58.15,58.15,0,0,1-32-25.81,71.15,71.15,0,0,1-7.22-17,97.14,97.14,0,0,1-3-16.11,143.58,143.58,0,0,1,.19-29.51q.38-3.54.89-7c.33-2.31.73-4.69,1.13-6.82a140,140,0,0,1,3.44-14.28,134.62,134.62,0,0,1,5-13.78c1.91-4.48,4.09-8.81,6.4-13a151,151,0,0,1,16.09-23.17c11.86-14.14,25.36-25.52,38.44-36l9.73-7.76c3.29-2.61,6.76-5.4,10.33-8s7.27-5.28,11.11-7.8,7.87-4.91,11.85-7.05c2-1.08,3.93-2.12,5.85-3.1l5.54-2.91c3.57-1.91,6.93-3.77,10.15-5.77s6.34-4.1,9.41-6.32,6.08-4.55,9.09-6.93c6-4.77,11.95-9.78,18-14.74l9-7.43c1.49-1.23,3-2.46,4.44-3.73s3-2.47,4.41-3.76c5.84-5.06,11.65-10.2,17.43-15.52s11.58-10.72,17.42-16.26,11.74-11.21,17.78-16.86c3-2.84,6.08-5.65,9.18-8.45l9.06-8.08c5.92-5.33,11.77-10.63,17.22-16,2.72-2.67,5.34-5.34,7.88-8.1,1.26-1.37,2.55-2.81,3.78-4.2s2.35-2.73,3.52-4.16c4.69-5.72,9.38-12.06,14-18.56s9.23-13.16,13.85-19.82l13.85-19.9c4.56-6.56,9.05-13.28,12.73-19.68.91-1.6,1.75-3.14,2.49-4.63s1.38-2.89,2-4.46l1.05-2.56,1.08-2.71c.71-1.78,1.32-3.51,1.9-5.22a72.86,72.86,0,0,0,3.89-19.38c.06-.78.09-1.56.1-2.34s0-1.56,0-2.34,0-1.55,0-2.33l0-1.17c0-.39,0-.73,0-1.29,0-4.06-.12-7.78-.32-11a44,44,0,0,0-1-7.58,7.44,7.44,0,0,0-1.24-3,3.66,3.66,0,0,0-.37-.35,2.29,2.29,0,0,1-.38-.43,11.54,11.54,0,0,0-1.31-1.76c-1.58-1.86-5.85-4.8-12-6.74q-2.28-.74-5-1.34c-.89-.21-1.85-.39-2.84-.57-.71-.14-1.42-.34-2.14-.44a36.71,36.71,0,0,0-8.71-.46c-5.88.33-11.65,2.31-17.09,4.86-1.37.65-2.72,1.31-4.07,2s-2.63,1.38-4.21,2.26-3,1.7-4.37,2.57-2.58,1.72-3.79,2.64a108.9,108.9,0,0,0-12.4,11.78c-1.88,2-3.71,4-5.52,6.06a48.93,48.93,0,0,0-5,6.9,57.77,57.77,0,0,0-6.74,17.68,94.81,94.81,0,0,0-1.92,21.84,154.31,154.31,0,0,0,2.44,24.05l0,.12a2.26,2.26,0,0,1-3.7,2.1,85.7,85.7,0,0,1-17-20.56,91.45,91.45,0,0,1-10.75-26,81.52,81.52,0,0,1-1.39-30.59,83.22,83.22,0,0,1,3.95-15.76A68.32,68.32,0,0,1,545,262.08a72.73,72.73,0,0,1,10.4-12.24,103.87,103.87,0,0,1,12.14-9.77c2.09-1.46,4.21-2.85,6.32-4.17s4.28-2.62,6.1-3.68,4.26-2.43,6.52-3.54,4.62-2.18,7-3.11a144.09,144.09,0,0,1,29.85-7.83q7.71-1.23,15.62-1.72c1.32-.09,2.64-.14,4-.21l3.25-.2c2.26-.13,4.67-.27,7.19-.33a99,99,0,0,1,16.34.77,65.36,65.36,0,0,1,18.46,5.33,58.24,58.24,0,0,1,18,13A60.6,60.6,0,0,1,718.45,254a65,65,0,0,1,4.11,20.74,76,76,0,0,1-.2,8.91c-.22,2.79-.54,5.4-1,7.87-.79,4.93-1.85,9.29-2.85,13.3l-.88,3.59c-.29,1.23-.65,2.46-1,3.69s-.71,2.44-1.09,3.65-.77,2.42-1.19,3.62a172.9,172.9,0,0,1-12,26.64l-3.27,5.83-3.24,5.68c-1.18,2.06-2.48,4.25-3.77,6.27s-2.57,4-3.84,5.79c-5,7.34-9.8,14-14.51,20.79s-9.44,13.42-14.2,20L645.1,430.34c-4.89,6.69-9.81,13.47-15.33,20.42-1.37,1.73-2.81,3.47-4.29,5.21s-2.81,3.3-4.27,5c-2.9,3.28-5.86,6.53-8.84,9.65-5.94,6.28-11.87,12.19-17.82,18l-17.37,16.81-17.35,17c-5.87,5.74-11.87,11.52-18,17.24s-12.61,11.28-19.27,16.61c-3.31,2.68-6.68,5.31-10.12,7.86s-6.81,5-10.3,7.42c-7,4.8-14.24,9.27-21.77,13.51s-15.38,8.2-23.25,12l-11.51,5.44c-3.68,1.76-7.12,3.46-10.25,5.23a100.75,100.75,0,0,0-8.95,5.7c-2.88,2-5.68,4.31-8.49,6.7-1.39,1.2-2.77,2.46-4.15,3.72-.7.63-1.38,1.3-2.06,2l-2.1,2c-2.9,2.82-5.75,5.62-8.5,8.45a246.63,246.63,0,0,0-28.84,34.46A141.48,141.48,0,0,0,362,688.43c-1.44,3-2.69,6.05-3.86,9.1s-2.09,6.15-3,9.26-1.51,6.29-2.08,9.48c-.32,1.87-.57,3.49-.81,5.21s-.43,3.4-.59,5.09a86.87,86.87,0,0,0,.08,19.18,41.26,41.26,0,0,0,1.7,7.78,21.61,21.61,0,0,0,2.49,5.28,8.23,8.23,0,0,0,2.42,2.45,10.34,10.34,0,0,0,3.06,1.23,22.52,22.52,0,0,0,2.42.45c.94.11,2,.17,3.12.19a52.47,52.47,0,0,0,7.76-.6c2.86-.43,5.9-1.08,9.14-1.9,1.63-.41,3.29-.87,5.14-1.4,1.09-.31,1.51-.43,2.19-.64s1.29-.42,2-.67a70.7,70.7,0,0,0,8.2-3.54,77.84,77.84,0,0,0,7.91-4.59,75.34,75.34,0,0,0,7.32-5.43c1.19-.93,2.25-2,3.39-3l1.61-1.58c.54-.52,1.08-1,1.57-1.6a76.5,76.5,0,0,0,5.77-6.87c1.75-2.49,3.5-5,5.11-7.84a164.31,164.31,0,0,0,9.16-18.9c1.47-3.5,2.92-7.07,4.38-10.78l2.21-5.6,1-2.67,1-2.6q2-5.24,3.68-10.54l1.68-5.32.83-2.73.78-2.68a353.33,353.33,0,0,0,9.42-44.59c2.35-15.37,4.09-31.09,5.48-46.94.33-4,.7-7.93,1-11.92s.6-8,.82-11.9.51-7.88.67-11.83.39-7.9.48-11.86c.45-15.82.53-31.68,0-47.58-.23-7.94-.59-15.9-1-23.86s-1-15.92-1.63-23.91-1.36-16-2.12-24l-1.23-12.07c-.48-4-.87-7.82-1.44-11.76-2.1-15.68-5-31.44-8.25-47.15s-6.73-31.43-10.05-47.17-6.52-31.53-9.62-47.34l49-16.17a138.55,138.55,0,0,1,11,37.16,189.61,189.61,0,0,1,1.84,36.52c-.26,6-.69,11.9-1.44,17.78a147.72,147.72,0,0,1-3.37,17.46c-.75,2.89-1.57,5.77-2.49,8.7l-.7,2.22c-.25.75-.51,1.58-.74,2.2l-1.45,4c-1,2.71-2,5.59-3.19,8.65s-2.57,6.29-4.07,9.26-3,5.63-4.49,8.16l-4.25,7.3c-2.76,4.74-5.32,9.43-7.84,14.31s-5,9.85-7.71,14.87a147,147,0,0,1-9.11,15A106.55,106.55,0,0,1,440.7,439l-1.59,1.61-1.66,1.54c-1.09,1-2.2,2.05-3.35,3l-1.71,1.45L430.78,448l-3.27,2.58c-8.87,6.89-18.81,13.72-30.4,18.58a66.72,66.72,0,0,1-18.63,4.93,53.66,53.66,0,0,1-19.67-1.59,57.73,57.73,0,0,1-17.55-8.19,69.57,69.57,0,0,1-13.74-12.48,86.88,86.88,0,0,1-10-14.81c-.71-1.3-1.36-2.55-2-3.83s-1.37-2.69-2-4.11-1.23-2.81-1.73-4.28l-.79-2.18-.68-2.22a82.21,82.21,0,0,1-3.14-17.73,152.79,152.79,0,0,1-.23-17.08c.38-11.17,1.48-22.05,2.62-32.9s2.5-21.65,4-32.43c3.05-21.55,6.74-43,11.22-64.24a.13.13,0,0,1,.26,0Z"
                                />
                            </svg>
                        </motion.a>
                    </Link>
                </div>

                <nav
                    css={(theme) => ({
                        display: "flex",
                        flexDirection: "row",
                        gap: 20,

                        [theme.breakpoints.mobile]: {
                            display: "none",
                        },
                    })}
                >
                    {navigationItems.map(([label, href], i) => (
                        <Link href={href} key={href} passHref>
                            <motion.a
                                css={(theme) => ({
                                    padding: 10,
                                    color: theme.colors.text.bodySecondary,
                                    transition: "color 0.2s",

                                    "&:hover": {
                                        color: theme.colors.text.bodyPrimary,
                                    },
                                })}
                                initial={{ opacity: 0 }}
                                animate={{ opacity: 1, transition: { delay: (i + 1) * 0.2 } }}
                            >
                                <span>{label}</span>
                            </motion.a>
                        </Link>
                    ))}
                </nav>

                <div
                    css={{
                        margin: "auto 0 auto auto",
                    }}
                >
                    <div
                        onClick={() => setSidebarOpen(true)}
                        css={{
                            fontSize: 22,
                            padding: 10,
                        }}
                    >
                        <MdMenu />
                    </div>
                </div>

                <motion.div
                    css={(theme) => ({
                        position: "fixed",
                        top: 0,
                        left: 0,
                        right: 0,
                        bottom: 0,

                        [theme.breakpoints.desktop]: {
                            display: "none",
                        },
                    })}
                    animate={{
                        background: isSidebarOpen ? "rgb(0, 0, 0, 0.6)" : "rgb(0, 0, 0, 0)",
                        pointerEvents: isSidebarOpen ? "all" : "none",
                    }}
                    onClick={() => setSidebarOpen(false)}
                >
                    <motion.div
                        css={(theme) => ({
                            position: "fixed",
                            right: 0,
                            top: 0,
                            bottom: 0,
                            width: 200,
                            padding: 18,
                            display: "flex",
                            flexDirection: "column",
                            background: theme.colors.background.card,
                        })}
                        animate={{ translateX: isSidebarOpen ? 0 : 200 }}
                        onClick={(e) => e.stopPropagation()}
                    >
                        <div
                            css={{
                                margin: "0 0 0 auto",
                                fontSize: 24,
                            }}
                            onClick={() => setSidebarOpen(false)}
                        >
                            <MdClose />
                        </div>
                        <nav
                            css={{
                                display: "flex",
                                flexDirection: "column",
                                alignItems: "flex-end",
                                marginTop: 10,
                            }}
                        >
                            {navigationItems.map(([label, href]) => (
                                <Link href={href} key={href} passHref>
                                    <a
                                        css={(theme) => ({
                                            padding: "8px 0",
                                            color: theme.colors.text.bodySecondary,
                                            transition: "color 0.2s",

                                            "&:hover": {
                                                color: theme.colors.text.bodyPrimary,
                                            },
                                        })}
                                    >
                                        <span>{label}</span>
                                    </a>
                                </Link>
                            ))}
                        </nav>
                    </motion.div>
                </motion.div>
            </div>
        </header>
    );
};

const Footer = () => {
    return (
        <footer
            css={(theme) => ({
                padding: "20px 0",
                color: theme.colors.text.bodySecondary,

                textAlign: "center",
                fontFamily: "Fira Code, monospace",
                fontSize: 14,
            })}
        >
            <p>Made by Ian Hornik &copy; {new Date().getFullYear()}</p>
        </footer>
    );
};

export const Layout = ({ children }) => {
    return (
        <div
            css={{
                position: "relative",
            }}
        >
            <Header />
            <main
                css={{
                    position: "relative",
                    width: "100%",
                    maxWidth: 1024,
                    margin: "0 auto",
                    padding: "78px 12px",
                }}
            >
                {children}
            </main>
            <Footer />
        </div>
    );
};
